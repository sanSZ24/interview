---
typora-root-url: ./
---

<h2>框架
</h2>

<h5>Spring
</h5>

- bean：spring框架中的bean是单例的。bean是被spring IoC容器管理的类的对象。

  > 单例bean不是线程安全的。如果spring bean并没有可变的状态，如service和dao，则该bean是线程安全的。简单来说就是不能修改的是线程安全的。如果在bean中定义了可修改的成员变量，则需要考虑线程安全，可以使用多例或加锁来进行解决。



- AOP(面向切面编程): 用于将那些与业务无关，但对多个对象产生影响的公共行为逻辑，抽取并封装为一个可重用的模块，这个模块被称为切面。减少了系统中的重复代码，降低了模块之间的耦合度，同时提高了系统的可维护性。底层是动态代理。

  - 常见AOP使用场景:

    - 记录操作日志

    - 缓存处理
    - spring中内置的事务处理

  - spring中的事务

    - 编程式事务: 对业务代码有侵入性，项目中很少使用。
    - 声明式事务: 建立于AOP之上。本质是通过AOP功能，对方法前后进行拦截，将事务的功能编织到拦截方法中，也就是**在目标方法开始之前加入一个事务，在执行完目标方法之后根据执行情况提交或回滚事务**。
    
     

- IoC(控制反转)：是一种设计思想，而不是一个具体的技术实现。IoC 的思想就是将原本在程序中手动创建对象的控制权，交由 Spring 框架来管理，Spring 创建对象**，**管理对象**（通过依赖注入（DI）**装配对象**、**配置对象）**并且管理这些对象的整个生命周期**。

  > IoC的优点：集中管理对象、方便维护 、降低耦合度。



- 事务失效的场景
  - 异常捕获处理: 事务捕获到抛出的异常后，才能进行回滚处理，如果自己处理异常，事务无法知悉出现异常，不会回滚。解决: 在catch抛出RunTimeException(e)。
  - 抛出检查异常: spring默认只会回滚非检查异常。解决: 在事务注解中添加rollbackfor=Exception.class。
  - 非public方法: spring为方法创建代理、添加事务通知、前提条件都是该方法是**public**的。



- bean的生命周期

  - beanDefinition: spring容器在进行实例化时，会将xml配置的\<bean>的信息封装成一个beanDefinition对象，spring根据beanDefinition来创建bean对象，里面有很多属性来描述bean。

  - bean的生命周期:

    ![bean的生命周期](/assets/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.jpg)

    

- spring中的循环引用/依赖: 在创建A对象的同时需要使用B对象，在创建B对象时需要用到A对象。三级缓存解决循环依赖。一般的类使用一二级缓存就可以解决问题，如果创建的是单例对象就需要使用到三级缓存。

  ![缓存](/assets/spring%E7%BC%93%E5%AD%98.jpg)

  > 构造方法出现了循环依赖可以使用@Lazy注解进行懒加载，什么时候需要对象再进行bean对象的创建。



<h5>Spring MVC

- springMVC的执行流程

  - 视图阶段(老旧JSP等)

    ![JSP完整流程](/assets/springMVC%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B.jpg)

  - 前后端分离阶段(接口开发、异步)

    ![前后端分离开发](/assets/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B.jpg)

    

<h5>springBoot

- springboot自动配置原理

  ![springboot](/assets/springboot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE.jpg)



<h5>spring框架的常见注解
</h5>

- spring常见注解

  ![spring](/assets/spring%E6%B3%A8%E8%A7%A3.jpg)

  

- springMVC常见注解

  ![springMVC](/assets/springMVC%E6%B3%A8%E8%A7%A3.jpg)



- Springboot常见注解

  ![springboot](/assets/springboot%E6%B3%A8%E8%A7%A3.jpg)